<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#667eea">
    <title>Number Wordle - Multiplayer Edition</title>
    <link rel="stylesheet" href="styles.css">
    <script src="/socket.io/socket.io.js"></script>
    <script>
        // Register service worker for mobile persistence
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Number Wordle</h1>
            <p class="subtitle">Multiplayer Number Guessing Game!</p>
        </header>

        <!-- Game Lobby -->
        <div class="game-lobby" id="gameLobby">
            <h2>Choose Your Game Mode</h2>
            
            <!-- Single Player Mode -->
            <div class="game-mode-section">
                <h3>üéÆ Single Player Mode</h3>
                <p>Play against the computer AI</p>
                <div class="single-player-setup">
                    <input type="text" id="singlePlayerName" placeholder="Enter your name" maxlength="20">
                    <button class="single-player-btn" id="startSinglePlayer">Start Single Player Game</button>
                </div>
            </div>
            
            <!-- Multiplayer Mode -->
            <div class="game-mode-section">
                <h3>üåê Multiplayer Mode</h3>
                <p>Play with friends online</p>
                <div class="lobby-options">
                    <div class="create-game">
                        <h4>Create New Game</h4>
                        <input type="text" id="createPlayerName" placeholder="Enter your name" maxlength="20">
                        <button class="create-btn" id="createGame">Create Game</button>
                    </div>
                    
                    <div class="join-game">
                        <h4>Join Existing Game</h4>
                        <input type="text" id="joinPlayerName" placeholder="Enter your name" maxlength="20">
                        <input type="text" id="gameCode" placeholder="Enter game code" maxlength="6">
                        <button class="join-btn" id="joinGame">Join Game</button>
                    </div>
                </div>
                
                <div class="active-games" id="activeGames">
                    <h4>Active Games</h4>
                    <div class="games-list" id="gamesList">
                        <!-- Active games will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Single Player Game Board -->
        <div class="single-player-board" id="singlePlayerBoard" style="display: none;">
            <div class="game-header">
                <div class="game-mode-indicator">
                    <strong>üéÆ Single Player Mode</strong>
                </div>
                <div class="current-player">
                    <h3>Your Turn!</h3>
                </div>
            </div>
            
            <div class="game-info-single">
                <p><strong>Player:</strong> <span id="singlePlayerNameDisplay"></span></p>
                <p><strong>Objective:</strong> Guess the AI's 5-digit sequence</p>
                <p><strong>Mode:</strong> Single Player Challenge</p>
            </div>
            
            <div class="guess-section">
                <h3>Make Your Guess</h3>
                <div class="guess-inputs">
                    <input type="number" min="0" max="9" class="single-guess-input" data-position="0">
                    <input type="number" min="0" max="9" class="single-guess-input" data-position="1">
                    <input type="number" min="0" max="9" class="single-guess-input" data-position="2">
                    <input type="number" min="0" max="9" class="single-guess-input" data-position="3">
                    <input type="number" min="0" max="9" class="single-guess-input" data-position="4">
                </div>
                <div class="guess-buttons">
                    <button class="submit-guess" id="submitSinglePlayerGuess">Submit Guess</button>
                    <button class="give-up-btn" id="giveUp">Give Up & Reveal</button>
                </div>
            </div>

            <div class="game-history">
                <div class="history-tabs">
                    <button class="tab-btn active" data-tab="my-guesses-single">Your Guesses</button>
                </div>
                <div class="history-container" id="singlePlayerHistoryContainer">
                    <!-- Game history will be populated here -->
                </div>
            </div>

            <button class="new-game-btn" id="newSinglePlayerGame">New Game</button>
        </div>

        <!-- Game Setup -->
        <div class="game-setup" id="gameSetup" style="display: none;">
            <h2>Set Up Your Numbers</h2>
            <div class="game-info">
                <p><strong>Game Code:</strong> <span id="gameCodeDisplay"></span></p>
                <p><strong>Players:</strong> <span id="playersList"></span></p>
                <p id="waitingMessage">Waiting for other player to join...</p>
            </div>
            
            <div class="player-inputs">
                <div class="player-section">
                    <h3 id="currentPlayerName">Your Numbers</h3>
                    <div class="number-inputs">
                        <input type="number" min="0" max="9" class="number-input" data-position="0">
                        <input type="number" min="0" max="9" class="number-input" data-position="1">
                        <input type="number" min="0" max="9" class="number-input" data-position="2">
                        <input type="number" min="0" max="9" class="number-input" data-position="3">
                        <input type="number" min="0" max="9" class="number-input" data-position="4">
                    </div>
                    <button class="set-numbers-btn" id="setNumbers">Set Numbers</button>
                </div>
            </div>
        </div>

        <!-- Game Board -->
        <div class="game-board" id="gameBoard" style="display: none;">
            <div class="game-header">
                <div class="game-code">
                    <strong>Game:</strong> <span id="gameCodeGame"></span>
                </div>
                <div class="current-player">
                    <h3>Current Turn: <span id="currentPlayer">Player 1</span></h3>
                </div>
            </div>
            
            <div class="my-numbers-section">
                <h3>Your Secret Numbers</h3>
                <div class="my-numbers-display" id="myNumbersDisplay">
                    <!-- Player's numbers will be displayed here -->
                </div>
                <div class="duplicate-warning" id="duplicateWarning" style="display: none;">
                    <p>‚ö†Ô∏è <strong>Note:</strong> Your opponent is using duplicate numbers!</p>
                </div>
            </div>
            
            <div class="notes-section">
                <h3>üìù Notes & Deductions</h3>
                <p class="notes-instruction">Click numbers to mark them as definitely in or not in the sequence:</p>
                <div class="notes-grid" id="notesGrid">
                    <!-- Notes grid will be populated here -->
                </div>
                <div class="notes-legend">
                    <div class="legend-item">
                        <span class="legend-color definitely-in"></span>
                        <span>Definitely in sequence</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color definitely-not"></span>
                        <span>Definitely not in sequence</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color unknown"></span>
                        <span>Unknown/Unmarked</span>
                    </div>
                </div>
                <button class="clear-notes-btn" id="clearNotes">Clear All Notes</button>
            </div>
            
            <div class="guess-section">
                <h3>Make Your Guess</h3>
                <div class="guess-inputs">
                    <input type="number" min="0" max="9" class="guess-input" data-position="0">
                    <input type="number" min="0" max="9" class="guess-input" data-position="1">
                    <input type="number" min="0" max="9" class="guess-input" data-position="2">
                    <input type="number" min="0" max="9" class="guess-input" data-position="3">
                    <input type="number" min="0" max="9" class="guess-input" data-position="4">
                </div>
                <button class="submit-guess" id="submitGuess">Submit Guess</button>
            </div>

            <div class="game-history">
                <div class="history-tabs">
                    <button class="tab-btn active" data-tab="my-guesses">My Guesses</button>
                    <button class="tab-btn" data-tab="opponent-guesses">Opponent's Guesses</button>
                </div>
                <div class="history-container" id="historyContainer">
                    <!-- Game history will be populated here -->
                </div>
            </div>

            <button class="new-game-btn" id="newGame">New Game</button>
        </div>

        <!-- Single Player Winner Screen -->
        <div class="single-player-winner" id="singlePlayerWinner" style="display: none;">
            <h2>üéâ Game Over! üéâ</h2>
            <p id="singlePlayerWinnerText"></p>
            <div class="game-stats">
                <p><strong>Total Guesses:</strong> <span id="totalGuesses">0</span></p>
                <p><strong>Game Duration:</strong> <span id="gameDuration">0:00</span></p>
            </div>
            <button class="new-game-btn" id="newSinglePlayerGameFromWinner">Play Again</button>
            <button class="back-to-lobby-btn" id="backToLobby">Back to Lobby</button>
        </div>

        <!-- Single Player Give Up Screen -->
        <div class="single-player-giveup" id="singlePlayerGiveUp" style="display: none;">
            <h2>üòî You Gave Up!</h2>
            <p>The AI's secret numbers were:</p>
            <div class="ai-numbers-revealed" id="aiNumbersRevealed">
                <!-- AI numbers will be displayed here -->
            </div>
            <div class="game-stats">
                <p><strong>Total Guesses:</strong> <span id="giveUpTotalGuesses">0</span></p>
                <p><strong>Game Duration:</strong> <span id="giveUpGameDuration">0:00</span></p>
            </div>
            <button class="new-game-btn" id="newSinglePlayerGameFromGiveUp">Try Again</button>
            <button class="back-to-lobby-btn" id="backToLobbyFromGiveUp">Back to Lobby</button>
        </div>

        <!-- Winner Screen -->
        <div class="winner-screen" id="winnerScreen" style="display: none;">
            <h2>üéâ Congratulations! üéâ</h2>
            <p id="winnerText"></p>
            
            <div class="revealed-numbers-section" id="revealedNumbersSection" style="display: none;">
                <h3>üîç The Numbers Revealed</h3>
                <div class="numbers-comparison">
                    <div class="player-numbers">
                        <h4 id="player1NameDisplay">Player 1</h4>
                        <div class="revealed-numbers" id="player1NumbersDisplay">
                            <!-- Player 1 numbers will be displayed here -->
                        </div>
                    </div>
                    <div class="vs-separator">
                        <span>VS</span>
                    </div>
                    <div class="player-numbers">
                        <h4 id="player2NameDisplay">Player 2</h4>
                        <div class="revealed-numbers" id="player2NumbersDisplay">
                            <!-- Player 2 numbers will be displayed here -->
                        </div>
                    </div>
                </div>
                <div class="game-stats" id="gameStatsSection" style="display: none;">
                    <h4>üìä Game Statistics</h4>
                    <div class="stats-grid" id="statsGrid">
                        <!-- Game stats will be displayed here -->
                    </div>
                </div>
            </div>
            
            <button class="new-game-btn" id="newGameFromWinner">Play Again</button>
        </div>

        <!-- Connection Status -->
        <div class="connection-status" id="connectionStatus">
            <span class="status-indicator" id="statusIndicator"></span>
            <span class="status-text" id="statusText">Connecting...</span>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 